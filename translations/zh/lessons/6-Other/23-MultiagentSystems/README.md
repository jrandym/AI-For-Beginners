# 多智能体系统

实现智能的一个可能方法是所谓的**涌现**（或**协同**）方法，这一方法基于一个事实：许多相对简单的智能体的组合行为可以导致系统整体更复杂（或更智能）的行为。从理论上讲，这基于[集体智能](https://en.wikipedia.org/wiki/Collective_intelligence)、[涌现主义](https://en.wikipedia.org/wiki/Global_brain)和[进化控制论](https://en.wikipedia.org/wiki/Global_brain)的原则，这些原则表明，当较低级系统被恰当地组合时，高级系统会获得某种附加值（即*元系统转变原则*）。

## [课前测验](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/123)

**多智能体系统**的方向在1990年代的人工智能领域应运而生，作为对互联网和分布式系统增长的回应。经典人工智能教材之一，[人工智能：现代方法](https://en.wikipedia.org/wiki/Artificial_Intelligence:_A_Modern_Approach)，从多智能体系统的角度探讨经典人工智能的观点。

多智能体方法的核心是**智能体**的概念——一种存在于某种**环境**中的实体，它能够感知并对其进行操作。这是一个非常广泛的定义，智能体可以有许多不同的类型和分类：

* 按推理能力：
   - **反应型**智能体通常具有简单的请求-响应行为
   - **深思型**智能体运用某种逻辑推理和/或规划能力
* 按智能体执行代码的位置：
   - **静态**智能体在专用网络节点上工作
   - **移动**智能体可以在网络节点之间移动其代码
* 按行为：
   - **被动智能体**没有特定目标。这些智能体可以对外部刺激做出反应，但不会主动采取任何行动。
   - **主动智能体**有一些他们追求的目标
   - **认知智能体**涉及复杂的规划和推理

如今，多智能体系统在许多应用中得到了使用：

* 在游戏中，许多非玩家角色使用某种形式的人工智能，可以被视为智能体
* 在视频制作中，渲染涉及人群的复杂3D场景通常使用多智能体模拟
* 在系统建模中，多智能体方法被用来模拟复杂模型的行为。例如，多智能体方法成功用于预测COVID-19疫情在全球的传播。类似的方法可以用来模拟城市交通，并观察其如何对交通规则的变化做出反应。
* 在复杂的自动化系统中，每个设备可以作为一个独立的智能体，从而使整个系统变得不那么单一，更加稳健。

我们不会花太多时间深入探讨多智能体系统，而是考虑一个**多智能体建模**的例子。

## NetLogo

[NetLogo](https://ccl.northwestern.edu/netlogo/)是一个基于修改版[Logo](https://en.wikipedia.org/wiki/Logo_(programming_language))编程语言的多智能体建模环境。这种语言是为向儿童教授编程概念而开发的，它允许您控制一个名为**海龟**的智能体，该智能体可以移动，并留下痕迹。这使得创建复杂的几何图形成为可能，这是理解智能体行为的一种非常直观的方式。

在NetLogo中，我们可以通过使用`create-turtles`命令创建许多海龟。然后，我们可以命令所有海龟执行某些动作（在下面的例子中——向前移动10点）：

```
create-turtles 10
ask turtles [
  forward 10
]
```

当然，当所有海龟都做同样的事情时就没有趣味了，因此我们可以`ask` groups of turtles, eg. those who are in the vicinity of a certain point. We can also create turtles of different *breeds* using `breed [cats cat]` command. Here `cat`是一个品种的名称，我们需要同时指定单数和复数形式，因为不同的命令使用不同的形式以便于理解。

> ✅ 我们不会深入学习NetLogo语言本身——如果您有兴趣了解更多，可以访问精彩的[初学者互动NetLogo词典](https://ccl.northwestern.edu/netlogo/bind/)资源。

您可以[下载](https://ccl.northwestern.edu/netlogo/download.shtml)并安装NetLogo进行尝试。

### 模型库

NetLogo的一个好处是它包含一个可供您尝试的工作模型库。前往**文件 → 模型库**，您会有许多类别的模型可供选择。

<img alt="NetLogo模型库" src="images/NetLogo-ModelLib.png" width="60%"/>

> 由Dmitry Soshnikov提供的模型库截图

您可以打开其中一个模型，例如**生物学 → 群聚**。

### 主要原则

打开模型后，您将进入NetLogo的主屏幕。这里是一个示例模型，描述了在有限资源（草）下狼和羊的种群。

![NetLogo主屏幕](../../../../../translated_images/NetLogo-Main.32653711ec1a01b3cab22ec0b148e64193d0b979b055285bef329d5e3d6958c5.zh.png)

> 截图由Dmitry Soshnikov提供

在此屏幕上，您可以看到：

* **界面**部分包含：
  - 所有智能体生活的主要场地
  - 不同的控件：按钮、滑块等
  - 您可以用来显示仿真参数的图表
* **代码**选项卡包含编辑器，您可以在其中输入NetLogo程序

在大多数情况下，界面会有一个**设置**按钮，用于初始化仿真状态，以及一个**开始**按钮，用于启动执行。这些由代码中相应的处理程序处理，其样子如下：

```
to go [
...
]
```

NetLogo的世界由以下对象组成：

* **智能体**（海龟）可以在场地上移动并做一些事情。您可以使用`ask turtles [...]` syntax, and the code in brackets is executed by all agents in *turtle mode*.
* **Patches** are square areas of the field, on which agents live. You can refer to all agents on the same patch, or you can change patch colors and some other properties. You can also `ask patches`来命令智能体执行某些操作。
* **观察者**是一个独特的智能体，控制着世界。所有按钮处理程序都是在*观察者模式*下执行的。

> ✅ 多智能体环境的美妙之处在于，运行在海龟模式或补丁模式的代码是由所有智能体并行同时执行的。因此，通过编写少量代码并编程单个智能体的行为，您可以创建整个仿真系统的复杂行为。

### 群聚

作为多智能体行为的一个例子，让我们考虑**[群聚](https://en.wikipedia.org/wiki/Flocking_(behavior))**。群聚是一种复杂的模式，与鸟群飞行的方式非常相似。观察它们飞行时，您可能会觉得它们遵循某种集体算法，或者它们具备某种形式的*集体智能*。然而，这种复杂行为的产生是因为每个个体智能体（在这种情况下是*鸟*）仅观察与其短距离内的其他智能体，并遵循三条简单规则：

* **对齐** - 它朝着邻近智能体的平均航向调整方向
* **凝聚** - 它试图朝着邻居的平均位置调整方向（*长距离吸引*）
* **分离** - 当靠近其他鸟时，它试图远离（*短距离排斥*）

您可以运行群聚示例并观察其行为。您还可以调整参数，例如*分离程度*或*视距*，这定义了每只鸟可以看到的距离。请注意，如果您将视距减少到0，所有鸟将变得失明，群聚将停止。如果您将分离减少到0，所有鸟将聚集成一条直线。

> ✅ 切换到**代码**选项卡，查看群聚的三条规则（对齐、凝聚和分离）在代码中是如何实现的。注意我们仅引用在视野中的那些智能体。

### 其他可见模型

还有一些有趣的模型供您实验：

* **艺术 → 烟花**展示了烟花如何被视为单个火流的集体行为
* **社会科学 → 交通基础**和**社会科学 → 交通网格**展示了城市交通在1D和2D网格中有或没有交通信号灯的模型。仿真中的每辆车遵循以下规则：
   - 如果前方空间为空 - 加速（直到达到某一最大速度）
   - 如果看到前方有障碍物 - 刹车（您可以调整司机的视距）
* **社会科学 → 聚会**展示了人们在鸡尾酒会上如何聚集。您可以找到导致团体幸福感最快增加的参数组合。

从这些例子中可以看出，多智能体模拟可以非常有助于理解由遵循相同或相似逻辑的个体组成的复杂系统的行为。它也可以用于控制虚拟智能体，例如计算机游戏中的[NPC](https://en.wikipedia.org/wiki/NPC)或3D动画世界中的智能体。

## 深思型智能体

上述描述的智能体非常简单，使用某种算法对环境的变化做出反应。因此，它们是**反应型智能体**。然而，有时智能体可以推理和规划其行动，这种情况下它们被称为**深思型**。

一个典型的例子是一个个人智能体，它接收到人类的指令来预定度假旅行。假设有许多生活在互联网上的智能体可以帮助它。它应该联系其他智能体以查看哪些航班可用，哪些日期的酒店价格是多少，并尝试协商最佳价格。当度假计划完成并得到所有者确认后，它可以继续进行预定。

为了做到这一点，智能体需要**通信**。为了成功通信，它们需要：

* 一些**标准语言来交换知识**，例如[知识交换格式](https://en.wikipedia.org/wiki/Knowledge_Interchange_Format)（KIF）和[知识查询与操作语言](https://en.wikipedia.org/wiki/Knowledge_Query_and_Manipulation_Language)（KQML）。这些语言是基于[言语行为理论](https://en.wikipedia.org/wiki/Speech_act)设计的。
* 这些语言还应该包括一些**谈判协议**，基于不同的**拍卖类型**。
* 一个**共同本体**，以便它们引用相同的概念并了解其语义
* 一种**发现**不同智能体可以做什么的方法，这也基于某种本体

深思型智能体比反应型智能体复杂得多，因为它们不仅对环境的变化做出反应，还应该能够*主动*采取行动。深思型智能体的一种提议架构是所谓的信念-欲望-意图（BDI）智能体：

* **信念**形成关于智能体环境的一组知识。它可以结构化为知识库或一组规则，智能体可以将其应用于环境中的特定情况。
* **欲望**定义了智能体想要做的事情，即它的目标。例如，上述个人助手智能体的目标是预定旅行，而酒店智能体的目标是最大化利润。
* **意图**是智能体计划实现其目标的具体行动。行动通常会改变环境并导致与其他智能体的通信。

有一些可用于构建多智能体系统的平台，例如[JADE](https://jade.tilab.com/)。[这篇论文](https://arxiv.org/ftp/arxiv/papers/2007/2007.08961.pdf)包含对多智能体平台的综述，以及多智能体系统及其不同使用场景的简要历史。

## 结论

多智能体系统可以采取非常不同的形式，并用于许多不同的应用。它们都倾向于关注单个智能体的简单行为，并通过**协同效应**实现整体系统的更复杂行为。

## 🚀 挑战

将这节课带入现实世界，尝试构思一个可以解决问题的多智能体系统。例如，优化校车路线的多智能体系统需要做些什么？它在面包店中如何工作？

## [课后测验](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/223)

## 复习与自学

回顾这种类型系统在行业中的使用。选择一个领域，例如制造业或视频游戏行业，发现多智能体系统如何用于解决独特问题。

## [NetLogo作业](assignment.md)

**免责声明**：
本文件是使用基于机器的人工智能翻译服务进行翻译的。尽管我们努力追求准确性，但请注意，自动翻译可能包含错误或不准确之处。原始文件的母语版本应被视为权威来源。对于关键信息，建议进行专业的人类翻译。我们对因使用此翻译而产生的任何误解或误释不承担任何责任。