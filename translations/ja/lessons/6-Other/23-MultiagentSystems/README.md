# マルチエージェントシステム

知能を達成するための可能な方法の一つは、**エマージェント**（または**シナジー的**）アプローチと呼ばれるもので、多くの比較的単純なエージェントの結合された行動が、全体としてより複雑（または知的）なシステムの行動を生み出すという事実に基づいています。理論的には、これは[集団知能](https://en.wikipedia.org/wiki/Collective_intelligence)、[エマージェンティズム](https://en.wikipedia.org/wiki/Global_brain)、および[進化的サイバネティクス](https://en.wikipedia.org/wiki/Global_brain)の原則に基づいており、適切に組み合わされることで、下位システムからの何らかの付加価値を得ることができる（いわゆる*メタシステム遷移の原則*）とされています。

## [講義前クイズ](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/123)

**マルチエージェントシステム**の方向性は、1990年代のAIにおいて、インターネットと分散システムの成長に応じて登場しました。古典的なAIの教科書の一つである[人工知能: 現代的アプローチ](https://en.wikipedia.org/wiki/Artificial_Intelligence:_A_Modern_Approach)は、マルチエージェントシステムの観点から古典的AIを見ています。

マルチエージェントアプローチの中心には、**エージェント**の概念があります。これは、何らかの**環境**の中で生きている存在で、その環境を知覚し、行動を起こすことができます。これは非常に広範な定義であり、エージェントにはさまざまなタイプや分類が存在します。

* 推論能力による分類:
   - **反応型**エージェントは通常、単純なリクエスト-レスポンス型の行動を持ちます
   - **熟慮型**エージェントは、何らかの論理的推論や計画能力を持ちます
* エージェントがコードを実行する場所による分類:
   - **静的**エージェントは専用のネットワークノードで動作します
   - **モバイル**エージェントは、ネットワークノード間でコードを移動できます
* 行動による分類:
   - **受動的エージェント**は特定の目標を持ちません。このようなエージェントは外部の刺激に反応することはできますが、自ら行動を起こすことはありません。
   - **能動的エージェント**は追求する目標を持っています
   - **認知エージェント**は複雑な計画や推論を含みます

現在、マルチエージェントシステムは多くのアプリケーションで使用されています。

* ゲームでは、多くのノンプレイヤーキャラクターが何らかのAIを用いており、知的エージェントと見なすことができます
* ビデオ制作では、群衆を含む複雑な3Dシーンのレンダリングは通常、マルチエージェントシミュレーションを使用して行われます
* システムモデリングでは、マルチエージェントアプローチが複雑なモデルの行動をシミュレートするために使用されます。たとえば、マルチエージェントアプローチは、COVID-19の世界的な拡散を予測するために成功裏に使用されました。似たようなアプローチを用いて、都市の交通をモデル化し、交通ルールの変更に対する反応を観察することができます。
* 複雑な自動化システムでは、各デバイスが独立したエージェントとして機能し、全体のシステムをよりモノリシックではなく、より堅牢にします。

マルチエージェントシステムについて深く掘り下げる時間はありませんが、**マルチエージェントモデリング**の一例を考えてみましょう。

## NetLogo

[NetLogo](https://ccl.northwestern.edu/netlogo/)は、[Logo](https://en.wikipedia.org/wiki/Logo_(programming_language))プログラミング言語の改良版に基づくマルチエージェントモデリング環境です。この言語は、子供たちにプログラミングの概念を教えるために開発され、**タートル**と呼ばれるエージェントを制御することができ、そのタートルは動きながら跡を残します。これにより、エージェントの行動を理解するための非常に視覚的な方法で複雑な幾何学的図形を作成することができます。

NetLogoでは、`create-turtles`コマンドを使用して多くのタートルを作成できます。次に、すべてのタートルに何らかのアクションを実行させることができます（以下の例では、10ポイント前進します）。

```
create-turtles 10
ask turtles [
  forward 10
]
```

もちろん、すべてのタートルが同じことをするのは面白くないので、`ask` groups of turtles, eg. those who are in the vicinity of a certain point. We can also create turtles of different *breeds* using `breed [cats cat]` command. Here `cat`はブリードの名前であり、異なるコマンドが明確さのために異なる形を使用するため、単数形と複数形の両方を指定する必要があります。

> ✅ NetLogo言語そのものを学ぶことには立ち入らないでしょう - もっと学びたい場合は、素晴らしい[初心者向けインタラクティブNetLogo辞書](https://ccl.northwestern.edu/netlogo/bind/)を訪問してください。

NetLogoを[ダウンロード](https://ccl.northwestern.edu/netlogo/download.shtml)して、試してみることができます。

### モデルライブラリ

NetLogoの素晴らしい点は、試すことができる動作するモデルのライブラリが含まれていることです。**ファイル → モデルライブラリ**に移動すると、選択できる多くのモデルのカテゴリがあります。

<img alt="NetLogoモデルライブラリ" src="images/NetLogo-ModelLib.png" width="60%"/>

> Dmitry Soshnikovによるモデルライブラリのスクリーンショット

たとえば、**生物学 → 群れ行動**のモデルを開くことができます。

### 主な原則

モデルを開くと、メインのNetLogo画面に移動します。ここに、有限の資源（草）を考慮したオオカミと羊の個体群を記述したサンプルモデルがあります。

![NetLogoメイン画面](../../../../../translated_images/NetLogo-Main.32653711ec1a01b3cab22ec0b148e64193d0b979b055285bef329d5e3d6958c5.ja.png)

> Dmitry Soshnikovによるスクリーンショット

この画面では、以下のものが見えます：

* **インターフェース**セクションには：
  - すべてのエージェントが住むメインフィールド
  - ボタン、スライダーなどのさまざまなコントロール
  - シミュレーションのパラメータを表示するために使用できるグラフ
* **コード**タブには、NetLogoプログラムを入力できるエディタがあります

ほとんどの場合、インターフェースにはシミュレーションの状態を初期化する**セットアップ**ボタンと、実行を開始する**ゴー**ボタンがあります。これらは、次のようなコード内の対応するハンドラーによって処理されます：

```
to go [
...
]
```

NetLogoの世界は以下のオブジェクトで構成されています：

* **エージェント**（タートル）はフィールドを移動し、何かをすることができます。`ask turtles [...]` syntax, and the code in brackets is executed by all agents in *turtle mode*.
* **Patches** are square areas of the field, on which agents live. You can refer to all agents on the same patch, or you can change patch colors and some other properties. You can also `ask patches`を使用してエージェントに指示します。
* **オブザーバー**は、世界を制御するユニークなエージェントです。すべてのボタンハンドラーは*オブザーバーモード*で実行されます。

> ✅ マルチエージェント環境の美しさは、タートルモードまたはパッチモードで実行されるコードが、すべてのエージェントによって同時に並行して実行されることです。したがって、少しのコードを書き、個々のエージェントの行動をプログラムすることで、シミュレーションシステム全体の複雑な行動を作成することができます。

### 群れ行動

マルチエージェントの行動の一例として、**[群れ行動](https://en.wikipedia.org/wiki/Flocking_(behavior))**を考えてみましょう。群れ行動は、鳥の群れが飛ぶ方法に非常に似た複雑なパターンです。彼らが飛ぶのを見ていると、彼らが何らかの集団アルゴリズムに従っているか、あるいは何らかの形の*集団知能*を持っていると思うかもしれません。しかし、この複雑な行動は、各個体エージェント（この場合は*鳥*）が、近くにいる他のエージェントを観察し、次の3つの単純なルールに従うときに生じます：

* **整列** - 隣接するエージェントの平均的な進行方向に向かって舵を取ります
* **凝集** - 隣接エージェントの平均位置に向かって舵を取ろうとします（*長距離の引力*）
* **分離** - 他の鳥に近づきすぎると、離れようとします（*短距離の反発*）

群れ行動の例を実行し、その行動を観察することができます。また、*分離の度合い*や*視界の範囲*などのパラメータを調整することもできます。視界の範囲を0に減らすと、すべての鳥が盲目になり、群れ行動が停止します。分離を0に減らすと、すべての鳥が一直線に集まります。

> ✅ **コード**タブに切り替え、群れ行動の3つのルール（整列、凝集、分離）がコード内でどのように実装されているかを確認してください。視界にいるエージェントだけを参照していることに注意してください。

### 他のモデルを見る

試すことができるいくつかの興味深いモデルがあります：

* **アート → 花火**は、花火が個々の火流の集団行動と見なされる方法を示します
* **社会科学 → 交通基本**および**社会科学 → 交通グリッド**は、信号機の有無にかかわらず、1Dおよび2Dグリッドでの都市交通のモデルを示します。シミュレーション内の各車両は、次のルールに従います：
   - 前方のスペースが空いている場合 - 加速します（一定の最大速度まで）
   - 前方に障害物が見えた場合 - ブレーキをかけます（運転手がどれだけ遠くを見ることができるかを調整できます）
* **社会科学 → パーティー**は、人々がカクテルパーティー中にどのようにグループを形成するかを示します。グループの幸福度を最も早く高めるパラメータの組み合わせを見つけることができます。

これらの例からわかるように、マルチエージェントシミュレーションは、同じまたは類似の論理に従う個々のエージェントで構成される複雑なシステムの行動を理解するための非常に有用な方法です。また、コンピュータゲームの[NPC](https://en.wikipedia.org/wiki/NPC)や3Dアニメーションの世界のエージェントを制御するためにも使用できます。

## 熟慮型エージェント

上記のエージェントは非常に単純で、何らかのアルゴリズムを使用して環境の変化に反応します。このようなエージェントは**反応型エージェント**です。しかし、時にはエージェントが推論し、行動を計画することができ、その場合には**熟慮型**と呼ばれます。

典型的な例は、人間から休暇ツアーを予約する指示を受け取るパーソナルエージェントです。インターネット上に多くのエージェントがいて、これを手伝うことができるとしましょう。エージェントは、利用可能なフライトを確認し、異なる日付のホテル価格を調べ、最良の価格を交渉しようとします。休暇計画が完了し、所有者によって確認されると、予約を進めることができます。

そのためには、エージェントは**コミュニケーション**を取る必要があります。成功するコミュニケーションのためには、次のことが必要です：

* 知識を交換するためのいくつかの**標準的な言語**、例えば[知識交換フォーマット](https://en.wikipedia.org/wiki/Knowledge_Interchange_Format)（KIF）や[知識クエリおよび操作言語](https://en.wikipedia.org/wiki/Knowledge_Query_and_Manipulation_Language)（KQML）。これらの言語は[発話行為理論](https://en.wikipedia.org/wiki/Speech_act)に基づいて設計されています。
* さまざまな**オークションタイプ**に基づいた交渉のための**プロトコル**を含むべきです。
* 同じ概念を参照し、その意味を理解するための**共通のオントロジー**を使用します。
* さまざまなエージェントができることを**発見**する方法も必要です。これも何らかのオントロジーに基づいています。

熟慮型エージェントは反応型エージェントよりもはるかに複雑で、環境の変化に反応するだけでなく、*行動を開始する*こともできる必要があります。熟慮型エージェントの提案されたアーキテクチャの一つは、いわゆる信念-欲求-意図（BDI）エージェントです：

* **信念**は、エージェントの環境に関する知識のセットを形成します。これは知識ベースや、エージェントが環境の特定の状況に適用できるルールのセットとして構造化できます。
* **欲求**は、エージェントが何をしたいか、すなわちその目標を定義します。たとえば、上記のパーソナルアシスタントエージェントの目標はツアーを予約することであり、ホテルエージェントの目標は利益を最大化することです。
* **意図**は、エージェントが目標を達成するために計画する具体的な行動です。行動は通常、環境を変化させ、他のエージェントとのコミュニケーションを引き起こします。

マルチエージェントシステムを構築するためのプラットフォームもいくつか存在します。例えば、[JADE](https://jade.tilab.com/)があります。[この論文](https://arxiv.org/ftp/arxiv/papers/2007/2007.08961.pdf)には、マルチエージェントプラットフォームのレビューと、マルチエージェントシステムの簡単な歴史およびそのさまざまな使用シナリオが含まれています。

## 結論

マルチエージェントシステムは非常に異なる形を取り、多くの異なるアプリケーションで使用されることができます。  
それらはすべて、個々のエージェントのより単純な行動に焦点を当て、**シナジー効果**により全体のシステムのより複雑な行動を達成する傾向があります。

## 🚀 チャレンジ

このレッスンを現実世界に持ち込み、問題を解決できるマルチエージェントシステムを概念化してみてください。たとえば、学校のバスルートを最適化するためにマルチエージェントシステムは何をする必要があるでしょうか？ベーカリー

**免責事項**:  
この文書は、機械翻訳AIサービスを使用して翻訳されています。正確性を追求していますが、自動翻訳には誤りや不正確さが含まれる可能性があることにご留意ください。元の文書はその原文を権威ある情報源として考慮すべきです。重要な情報については、専門の人間による翻訳をお勧めします。この翻訳の使用に起因する誤解や誤解釈について、当社は一切責任を負いません。