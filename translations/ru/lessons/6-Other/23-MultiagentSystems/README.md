# Мультиагентные системы

Одним из возможных способов достижения интеллекта является так называемый **эмерджентный** (или **синергетический**) подход, который основан на том факте, что комбинированное поведение многих относительно простых агентов может привести к более сложному (или интеллектуальному) поведению системы в целом. Теоретически это основано на принципах [Коллективного Интеллекта](https://en.wikipedia.org/wiki/Collective_intelligence), [Эмерджентизма](https://en.wikipedia.org/wiki/Global_brain) и [Эволюционной Кибернетики](https://en.wikipedia.org/wiki/Global_brain), которые утверждают, что системы более высокого уровня получают некую добавленную ценность, когда они правильно комбинируются из систем более низкого уровня (так называемый *принцип метасистемного перехода*).

## [Предлекционный тест](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/123)

Направление **Мультиагентных Систем** возникло в ИИ в 1990-х годах в ответ на рост Интернета и распределенных систем. Один из классических учебников по ИИ, [Искусственный Интеллект: Современный Подход](https://en.wikipedia.org/wiki/Artificial_Intelligence:_A_Modern_Approach), сосредоточен на взгляде на классический ИИ с точки зрения мультиагентных систем.

Центральным понятием мультиагентного подхода является **Агент** - это сущность, которая существует в некой **среде**, которую она может воспринимать и воздействовать на нее. Это очень широкое определение, и существует множество различных типов и классификаций агентов:

* По их способности рассуждать:
   - **Реактивные** агенты обычно имеют простое поведение типа запрос-ответ
   - **Делиберативные** агенты используют некоторый вид логического рассуждения и/или планирования
* По месту, где агент выполняет свой код:
   - **Статические** агенты работают на выделенном сетевом узле
   - **Мобильные** агенты могут перемещать свой код между сетевыми узлами
* По их поведению:
   - **Пассивные агенты** не имеют конкретных целей. Такие агенты могут реагировать на внешние стимулы, но не будут инициировать никаких действий самостоятельно. 
   - **Активные агенты** имеют некоторые цели, которые они преследуют
   - **Когнитивные агенты** предполагают сложное планирование и рассуждение

В настоящее время мультиагентные системы используются в ряде приложений:

* В играх многие неперсонажные персонажи используют некоторый вид ИИ и могут считаться интеллектуальными агентами
* В видеопроизводстве рендеринг сложных 3D-сцен с участием толп обычно выполняется с использованием мультиагентного моделирования
* В моделировании систем мультиагентный подход используется для симуляции поведения сложной модели. Например, мультиагентный подход был успешно использован для прогнозирования распространения заболевания COVID-19 по всему миру. Подобный подход может быть использован для моделирования движения в городе и анализа его реакции на изменения в правилах дорожного движения.
* В сложных автоматизированных системах каждое устройство может действовать как независимый агент, что делает всю систему менее монолитной и более устойчивой.

Мы не будем углубляться в изучение мультиагентных систем, но рассмотрим один пример **Мультиагентного Моделирования**.

## NetLogo

[NetLogo](https://ccl.northwestern.edu/netlogo/) - это среда мультиагентного моделирования, основанная на модифицированной версии языка программирования [Logo](https://en.wikipedia.org/wiki/Logo_(programming_language)). Этот язык был разработан для обучения детей концепциям программирования и позволяет контролировать агента, называемого **черепашкой**, который может двигаться, оставляя след. Это позволяет создавать сложные геометрические фигуры, что является очень наглядным способом понять поведение агента.

В NetLogo мы можем создать много черепашек, используя команду `create-turtles`. Затем мы можем командовать всем черепашкам выполнять некоторые действия (в приведенном ниже примере - двигаться на 10 пунктов вперед):

```
create-turtles 10
ask turtles [
  forward 10
]
```

Конечно, это неинтересно, когда все черепашки делают одно и то же, поэтому мы можем `ask` groups of turtles, eg. those who are in the vicinity of a certain point. We can also create turtles of different *breeds* using `breed [cats cat]` command. Here `cat` - это название породы, и нам нужно указать как единственное, так и множественное число, потому что разные команды используют разные формы для ясности.

> ✅ Мы не будем углубляться в изучение самого языка NetLogo - вы можете посетить великолепный [Интерактивный Словарь NetLogo для Начинающих](https://ccl.northwestern.edu/netlogo/bind/), если хотите узнать больше.

Вы можете [скачать](https://ccl.northwestern.edu/netlogo/download.shtml) и установить NetLogo, чтобы попробовать его.

### Библиотека Моделей

Отличная вещь в NetLogo заключается в том, что она содержит библиотеку работающих моделей, которые вы можете попробовать. Перейдите в **Файл → Библиотека Моделей**, и у вас будет много категорий моделей на выбор.

<img alt="Библиотека Моделей NetLogo" src="images/NetLogo-ModelLib.png" width="60%"/>

> Скриншот библиотеки моделей Дмитрия Сошникова

Вы можете открыть одну из моделей, например **Биология → Стая**.

### Основные Принципы

После открытия модели вы попадаете на главный экран NetLogo. Вот пример модели, которая описывает популяцию волков и овец при有限ных ресурсах (травы).

![Главный Экран NetLogo](../../../../../translated_images/NetLogo-Main.32653711ec1a01b3cab22ec0b148e64193d0b979b055285bef329d5e3d6958c5.ru.png)

> Скриншот Дмитрия Сошникова

На этом экране вы можете увидеть:

* Раздел **Интерфейс**, который содержит:
  - Основное поле, где живут все агенты
  - Различные элементы управления: кнопки, ползунки и т.д.
  - Графики, которые вы можете использовать для отображения параметров симуляции
* Вкладку **Код**, которая содержит редактор, где вы можете вводить программу на NetLogo

В большинстве случаев интерфейс будет иметь кнопку **Настройка**, которая инициализирует состояние симуляции, и кнопку **Запуск**, которая начинает выполнение. Эти действия обрабатываются соответствующими обработчиками в коде, которые выглядят следующим образом:

```
to go [
...
]
```

Мир NetLogo состоит из следующих объектов:

* **Агенты** (черепашки), которые могут двигаться по полю и что-то делать. Вы командуете агентами, используя `ask turtles [...]` syntax, and the code in brackets is executed by all agents in *turtle mode*.
* **Patches** are square areas of the field, on which agents live. You can refer to all agents on the same patch, or you can change patch colors and some other properties. You can also `ask patches`, чтобы сделать что-то.
* **Наблюдатель** - это уникальный агент, который контролирует мир. Все обработчики кнопок выполняются в *режиме наблюдателя*.

> ✅ Прелесть мультиагентной среды в том, что код, который выполняется в режиме черепашки или в режиме патча, выполняется одновременно всеми агентами параллельно. Таким образом, написав немного кода и запрограммировав поведение отдельного агента, вы можете создать сложное поведение симуляционной системы в целом.

### Стая

В качестве примера мультиагентного поведения давайте рассмотрим **[Стаю](https://en.wikipedia.org/wiki/Flocking_(behavior))**. Стая - это сложный паттерн, который очень похож на то, как летают стаи птиц. Наблюдая за их полетом, можно подумать, что они следуют какому-то коллективному алгоритму или что они обладают какой-то формой *коллективного интеллекта*. Однако это сложное поведение возникает, когда каждый отдельный агент (в данном случае, *птица*) наблюдает только за некоторыми другими агентами на коротком расстоянии от себя и следует трем простым правилам:

* **Выравнивание** - он движется в сторону среднего направления соседних агентов
* **Когезия** - он пытается двигаться к средней позиции соседей (*долгосрочное притяжение*)
* **Разделение** - когда он приближается слишком близко к другим птицам, он пытается отдалиться (*краткосрочное отталкивание*)

Вы можете запустить пример стаи и наблюдать за поведением. Вы также можете регулировать параметры, такие как *степень разделения* или *дальность видимости*, которая определяет, как далеко каждая птица может видеть. Обратите внимание, что если вы уменьшите дальность видимости до 0, все птицы станут слепыми, и стая остановится. Если вы уменьшите разделение до 0, все птицы соберутся в прямую линию.

> ✅ Переключитесь на вкладку **Код** и посмотрите, где три правила стаи (выравнивание, когезия и разделение) реализованы в коде. Обратите внимание, как мы ссылаемся только на тех агентов, которые находятся в поле зрения.

### Другие Модели для Исследования

Есть еще несколько интересных моделей, с которыми вы можете поэкспериментировать:

* **Искусство → Фейерверки** показывает, как фейерверк может рассматриваться как коллективное поведение отдельных потоков огня
* **Социальные Науки → Основы Движения** и **Социальные Науки → Грид Движения** показывают модель городского движения в 1D и 2D сетке с или без светофоров. Каждая машина в симуляции следует следующим правилам:
   - Если пространство перед ней пусто - ускориться (до определенной максимальной скорости)
   - Если она видит препятствие впереди - тормозить (и вы можете настроить, как далеко водитель может видеть)
* **Социальные Науки → Вечеринка** показывает, как люди группируются во время коктейльной вечеринки. Вы можете найти комбинацию параметров, которая приводит к наиболее быстрому увеличению счастья группы.

Как видно из этих примеров, мультиагентные симуляции могут быть довольно полезным способом понять поведение сложной системы, состоящей из индивидуумов, которые следуют той же или схожей логике. Это также может быть использовано для управления виртуальными агентами, такими как [NPC](https://en.wikipedia.org/wiki/NPC) в компьютерных играх или агентами в 3D-анимированных мирах.

## Делиберативные Агенты

Агенты, описанные выше, очень просты, реагируя на изменения в окружающей среде, используя какой-то алгоритм. Таким образом, они являются **реактивными агентами**. Однако иногда агенты могут рассуждать и планировать свои действия, в этом случае их называют **делиберативными**.

Типичный пример - это персональный агент, который получает инструкцию от человека забронировать отпуск. Предположим, что в Интернете есть много агентов, которые могут ему помочь. Тогда ему нужно связаться с другими агентами, чтобы узнать, какие рейсы доступны, каковы цены на отели в разные даты и попытаться договориться о лучшей цене. Когда план отпуска будет завершен и подтвержден владельцем, он сможет продолжить с бронированием.

Для этого агентам нужно **общаться**. Для успешной коммуникации им необходимо:

* Некоторые **стандартные языки для обмена знаниями**, такие как [Формат Обмена Знаниями](https://en.wikipedia.org/wiki/Knowledge_Interchange_Format) (KIF) и [Язык Запросов и Манипуляций Знаниями](https://en.wikipedia.org/wiki/Knowledge_Query_and_Manipulation_Language) (KQML). Эти языки разработаны на основе [Теории Речевых Актов](https://en.wikipedia.org/wiki/Speech_act).
* Эти языки также должны включать некоторые **протоколы для переговоров**, основанные на различных **типах аукционов**.
* **Общая онтология**, чтобы использовать ее, чтобы они ссылались на одни и те же концепции, зная их семантику
* Способ **обнаружить**, что разные агенты могут делать, также основанный на какой-то онтологии

Делиберативные агенты гораздо сложнее, чем реактивные, потому что они не только реагируют на изменения в окружающей среде, но также должны быть в состоянии *инициировать* действия. Одна из предложенных архитектур для делиберативных агентов - это так называемый агент БДИ (Belief-Desire-Intention):

* **Убеждения** формируют набор знаний об окружающей среде агента. Это может быть структурировано как база знаний или набор правил, которые агент может применять к конкретной ситуации в окружающей среде.
* **Желания** определяют, что агент хочет сделать, т.е. его цели. Например, цель вышеупомянутого персонального ассистента - забронировать тур, а цель агента отеля - максимизировать прибыль.
* **Намерения** - это конкретные действия, которые агент планирует для достижения своих целей. Действия обычно изменяют окружающую среду и вызывают коммуникацию с другими агентами.

Существуют некоторые платформы для создания мультиагентных систем, такие как [JADE](https://jade.tilab.com/). [Этот документ](https://arxiv.org/ftp/arxiv/papers/2007/2007.08961.pdf) содержит обзор мультиагентных платформ, вместе с краткой историей мультиагентных систем и их различными сценариями использования.

## Заключение

Мультиагентные системы могут принимать очень разные формы и использоваться во многих различных приложениях. 
Все они, как правило, сосредоточены на более простом поведении отдельного агента и достигают более сложного поведения всей системы благодаря **синергетическому эффекту**.

## 🚀 Вызов

Примените этот урок к реальному миру и попробуйте концептуализировать мультиагентную систему, которая может решить проблему. Что, например, должна делать мультиагентная система, чтобы оптимизировать маршрут школьного автобуса? Как она могла бы работать в пекарне?

## [Постлекционный тест](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/223)

## Обзор и Самостоятельное Изучение

Изучите использование этого типа системы в промышленности. Выберите область, такую как производство или индустрия видеоигр, и узнайте, как мультиагентные системы могут быть использованы для решения уникальных проблем.

## [Задание по NetLogo](assignment.md)

**Отказ от ответственности**:  
Этот документ был переведен с использованием услуг машинного перевода на основе ИИ. Хотя мы стремимся к точности, пожалуйста, имейте в виду, что автоматические переводы могут содержать ошибки или неточности. Оригинальный документ на его родном языке следует считать авторитетным источником. Для критически важной информации рекомендуется профессиональный человеческий перевод. Мы не несем ответственности за любые недоразумения или неправильные интерпретации, возникающие в результате использования этого перевода.